<script src="/javascripts/UserViewModel.js" type="text/javascript" ></script>


	<h4>User management</h4>
  	<button type="button" class="btn btn-xs btn-success btn-lg" data-bind="click: newUser, enable: !currentUser.isNew">New user</button>
 	
 	<div class="row">
  		<div class="col-md-6">
  			<h5>All users</h5>
  			<table class="table table-hover">
		 		<thead>
		 			<tr>
			 			<th>Username</th>
			 			<th>Display Name</th>
			 			<th>Radius</th>
		 			</tr>
		 		</thead>
			 	<tbody data-bind="foreach: users()">
			        <tr data-bind="click: $root.selectUser, css: { active: isSelected}">
			            <td width="200px" data-bind="text: UserName"></td>
			            <td width="200px" data-bind="text: DisplayName"></td>
			            <td width="200px" data-bind="text: RadiusM"></td>

			        </tr>
			    </tbody>
			    <tbody>
			    <!-- ko if: users().length == 0 -->
			  		<tr>
			   			<td colspan="3">There are no users found</td>
			   		</tr>
			  	<!-- /ko -->
			  	</tbody>
			</table>
  		</div>
  		<div class="col-md-6" >
  		
  			<h5>User Details</h5>

  			  <!-- ko if: currentUser() -->
		  	
	  			<div class="row">
	  				<div class="col-md-6" >

	  					<h5>Detail</h5>
		  			   	<label>Username</label>
					    <input type="text" data-bind="value: currentUser().UserName" />
					</div>
	  			</div>

			  	<div class="row">
			  		<div class="col-md-6" >
				      	<label>Display Name</label>
				      	<input type="text" data-bind="value: currentUser().DisplayName" />
				    </div>
	  			</div> 
	  			<div class="row">
			  		<div class="col-md-6" >
				      	<label>Radius</label>
				      	<input type="number" data-bind="value: currentUser().RadiusM" />
				    </div>
	  			</div>     
			    
	  			<div class="row">
	  				<div class="col-md-6" >
			      	<!-- ko if: currentUser().isNew -->
			      	 	<button type="button" class="btn btn-xs btn-success btn-lg" data-bind="click: $root.addUser">Add user</button>
			      	<!-- /ko -->
			  		<!-- ko ifnot: currentUser().isNew -->
				     	<button type="button" class="btn btn-xs btn-warning btn-lg" data-bind="click: $root.updateUser,  enable: currentUser().hasChanged">Save changes</button>
				     	<button type="button" class="btn btn-xs btn-danger btn-lg" data-bind="click: $root.removeUser,">remove</button>
				    <!-- /ko -->
				   	</div>
				</div>
			  <!-- /ko -->
			  <!-- ko ifnot: currentUser() -->
			  		<p>Currently no user selected</p>
			  <!-- /ko -->

  		</div> 
  	</div>
 	

<script>
		ko.applyBindings(new UserViewModel());
</script>